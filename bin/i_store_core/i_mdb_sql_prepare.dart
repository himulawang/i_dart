/**
 * This script is generated by I Maker
 * DO NOT MODIFY!
 */

class IMariaDBSQLPrepare {
  static String makeAdd(String table, IModel model) {
    Map toAddMap = model.toAddFull(true);
    if (toAddMap.length == 0) throw new IStoreException(21030);
    List values = new List.filled(toAddMap.length, '?');

    return 'INSERT INTO `${table}` (`${toAddMap.keys.join("`, `")}`) VALUES (${values.join(", ")});';
  }

  static String makeSet(String table, IModel model) {
    Map toSetMap = model.toSetFull(true);
    if (toSetMap.length == 0) throw new IStoreException(21031);
    List columns = [];
    toSetMap.forEach((column, value) => columns.add("`${column}` = ?"));

    return 'UPDATE `${table}` SET ${columns.join(", ")} WHERE ${_makeWhere(model)};';
  }

  static String makeGet(String table, IModel model) {
    Map toGetMap = model.getMapFull();
    if (toGetMap.length == 0) throw new IStoreException(21032);

    return 'SELECT `${toGetMap.keys.join("`, `")}` FROM `${table}` WHERE ${_makeWhere(model)};';
  }

  static String makeDel(String table, IModel model) {
    return 'DELETE FROM `${table}` WHERE ${_makeWhere(model)};';
  }

  static String makeAddByClass(String table, prototype) {
    List columnList = [];
    prototype._mapFull.forEach((full, i) {
      if (prototype._columns[i]['toAdd']) return;
      columnList.add(full);
    });
    if (columnList.length == 0) throw new IStoreException(21042);
    List values = new List.filled(columnList.length, '?');

    return 'INSERT INTO `${table}` (`${columnList.join("`, `")}`) VALUES (${values.join(", ")});';
  }

  static String _makeWhere(IModel model) => '`${model.getPKColumns().join('` = ? AND `')}` = ?';
}
